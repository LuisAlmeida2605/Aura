<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aura Social Global</title>
    
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>

    <style>
        :root { --bg: #000; --card: #121212; --text: #fff; --accent: #0095f6; --border: #262626; }
        * { box-sizing: border-box; margin: 0; padding: 0; font-family: -apple-system, sans-serif; }
        body { background: var(--bg); color: var(--text); padding-bottom: 70px; }
        header { padding: 15px; border-bottom: 1px solid var(--border); display: flex; justify-content: space-between; align-items: center; position: sticky; top: 0; background: #000; z-index: 100; }
        .screen { display: none; padding: 15px; max-width: 500px; margin: auto; }
        .active { display: block; }
        .card { background: var(--card); padding: 15px; border-radius: 12px; border: 1px solid var(--border); margin-bottom: 15px; }
        input { width: 100%; padding: 12px; margin: 8px 0; border: 1px solid var(--border); border-radius: 8px; background: #262626; color: #fff; outline: none; }
        button { width: 100%; padding: 12px; background: var(--accent); color: #fff; border: none; border-radius: 8px; font-weight: bold; cursor: pointer; }
        .post { background: var(--card); border: 1px solid var(--border); border-radius: 12px; margin-bottom: 20px; overflow: hidden; }
        .post-header { padding: 12px; font-weight: bold; color: var(--accent); }
        .post img { width: 100%; display: block; max-height: 500px; object-fit: cover; }
        .post-content { padding: 12px; font-size: 15px; }
        .post-actions { padding: 12px; border-top: 1px solid var(--border); }
        nav { position: fixed; bottom: 0; width: 100%; background: #000; border-top: 1px solid var(--border); display: flex; justify-content: space-around; padding: 15px; }
        .nav-item { cursor: pointer; font-size: 22px; }
    </style>
</head>
<body>

    <header>
        <h2>Aura</h2>
        <div id="userBadge" style="font-size: 12px; color: #888;"></div>
    </header>

    <div id="scrAuth" class="screen active">
        <div class="card">
            <h2>Entrar</h2>
            <input type="text" id="uInp" placeholder="Usu√°rio">
            <input type="password" id="pInp" placeholder="Senha">
            <button onclick="Aura.execAuth()">Entrar</button>
            <p onclick="Aura.swap()" style="text-align:center; margin-top:15px; color:var(--accent); cursor:pointer">Criar conta</p>
        </div>
    </div>

    <div id="scrFeed" class="screen">
        <div class="card">
            <input type="text" id="pTxt" placeholder="O que h√° de novo?">
            <input type="file" id="pFile" accept="image/*">
            <button onclick="Aura.newPost()" id="btnPost">Publicar Global</button>
        </div>
        <div id="wall"></div>
    </div>

    <div id="scrProf" class="screen">
        <div class="card" style="text-align:center">
            <h2 id="meuNome">@usuario</h2>
            <button onclick="Aura.logout()" style="background:#ff4444; margin-top:10px">Sair</button>
        </div>
        <div id="myWall"></div>
    </div>

    <nav id="menu" style="display:none">
        <span class="nav-item" onclick="Aura.go('scrFeed')">üè†</span>
        <span class="nav-item" onclick="Aura.go('scrProf')">üë§</span>
    </nav>

    <script>
        // CONFIGURA√á√ïES DO SEU FIREBASE (J√Å PRONTAS)
        const firebaseConfig = {
          apiKey: "AIzaSyASdswQJmfCG_7MVwbwudHFpx-4zwv6jtg",
          authDomain: "aura-4d3aa.firebaseapp.com",
          projectId: "aura-4d3aa",
          storageBucket: "aura-4d3aa.firebasestorage.app",
          messagingSenderId: "253146544636",
          appId: "1:253146544636:web:9d677c28faddf1d7315a79"
        };

        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();

        const Aura = {
            user: localStorage.getItem('aura_user'),
            
            init() { if(this.user) this.startApp(); },

            execAuth() {
                const u = document.getElementById('uInp').value.trim().toLowerCase();
                if(!u) return alert("Digite um nome");
                this.user = u;
                localStorage.setItem('aura_user', u);
                this.startApp();
            },

            startApp() {
                document.getElementById('scrAuth').classList.remove('active');
                document.getElementById('menu').style.display = 'flex';
                document.getElementById('userBadge').innerText = "@" + this.user;
                this.go('scrFeed');
                this.listen();
            },

            go(id) {
                document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
                document.getElementById(id).classList.add('active');
                if(id === 'scrProf') document.getElementById('meuNome').innerText = "@" + this.user;
            },

            async newPost() {
                const txt = document.getElementById('pTxt').value;
                const file = document.getElementById('pFile').files[0];
                if(!txt && !file) return;

                const send = async (img) => {
                    await db.collection("posts").add({
                        u: this.user, txt: txt, img: img || "", likes: [], time: Date.now()
                    });
                    document.getElementById('pTxt').value = "";
                    document.getElementById('pFile').value = "";
                };

                if(file) {
                    const r = new FileReader();
                    r.onload = e => send(e.target.result);
                    r.readAsDataURL(file);
                } else send(null);
            },

            listen() {
                db.collection("posts").orderBy("time", "desc").onSnapshot(snap => {
                    const posts = snap.docs.map(doc => ({id: doc.id, ...doc.data()}));
                    this.render(posts, 'wall');
                    this.render(posts.filter(p => p.u === this.user), 'myWall');
                });
            },

            render(list, targetId) {
                document.getElementById(targetId).innerHTML = list.map(p => `
                    <div class="post">
                        <div class="post-header">@${p.u}</div>
                        ${p.img ? `<img src="${p.img}">` : ''}
                        <div class="post-content">${p.txt}</div>
                        <div class="post-actions">
                            <span onclick="Aura.like('${p.id}')" style="cursor:pointer">‚ù§Ô∏è ${p.likes.length}</span>
                        </div>
                    </div>
                `).join('');
            },

            async like(id) {
                const ref = db.collection("posts").doc(id);
                const doc = await ref.get();
                let l = doc.data().likes || [];
                if(l.includes(this.user)) l = l.filter(u => u !== this.user);
                else l.push(this.user);
                await ref.update({ likes: l });
            },

            logout() { localStorage.removeItem('aura_user'); location.reload(); }
        };

        Aura.init();
    </script>
</body>
</html>
